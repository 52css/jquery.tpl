/**
 * Created by Ivan on 14-2-28.
 * Version: 0.0.1
 */var easyTemplate=function(e,a){if(!e)return"";e!==easyTemplate.template&&(easyTemplate.template=e,easyTemplate.aStatement=easyTemplate.parsing(easyTemplate.separate(e)));var t=easyTemplate.aStatement,s=function(e){return e&&(a=e),arguments.callee};return s.toString=function(){return new Function(t[0],t[1])(a)},s};easyTemplate.separate=function(e){var a=/\\'/g,t=e.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(e,t,s,r,n,i,p,l){return t?"{|}"+(s?"-":"+")+r+"{|}":n?"\\'":i?"":p?"'+("+l.replace(a,"'")+")+'":void 0});return t},easyTemplate.parsing=function(e){var a,t,s,r,n,i,p=["var aRet = [];"];i=e.split(/\{\|\}/);for(var l=/\s/;i.length;)if(s=i.shift())if(n=s.charAt(0),"+"===n||"-"===n)switch(r=s.split(l),r[0]){case"+macro":a=r[1],t=r[2],p.push('aRet.push("<!--'+a+' start-->");');break;case"-macro":p.push('aRet.push("<!--'+a+' end-->");');break;case"+if":r.splice(0,1),p.push("if"+r.join(" ")+"{");break;case"+elseif":r.splice(0,1),p.push("}else if"+r.join(" ")+"{");break;case"-if":p.push("}");break;case"+else":p.push("}else{");break;case"+list":p.push("if("+r[1]+"&&"+r[1]+".constructor === Array){with({i:0,l:"+r[1]+".length,"+r[3]+"_index:0,"+r[3]+":null}){for(i=l;i--;){"+r[3]+"_index=(l-i-1);"+r[3]+"="+r[1]+"["+r[3]+"_index];");break;case"-list":p.push("}}}")}else s="'"+s+"'",p.push("aRet.push("+s+");");return p.push('return aRet.join("");'),t||p.unshift("var data = arguments[0];"),[t,p.join("")]};